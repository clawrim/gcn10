Curve Number Generation Scripts
===============================

This directory contains two scripts for generating Curve Number (CN) rasters using ESA WorldCover and HYSOGs250m data.

Scripts
-------

1. generate_curve_number.py
   - Serial implementation.
   - Processes blocks one at a time.
   - Suitable for debugging and small-scale runs.

2. generate_cn_parallel.py
   - Parallel implementation using multiprocessing.
   - Recommended for large-scale processing.
   - Supports specifying number of processes.

Inputs
------

- esa_worldcover_2021.vrt : ESA land cover dataset
- HYSOGs250m.tif          : Soil group dataset
- esa_extent_blocks.shp   : Block polygons with ID field
- default_lookup_*.csv    : Lookup tables for CN computation

Outputs
-------

- 18 GeoTIFFs per block (9 drained + 9 undrained)
- Stored in:
  - cn_rasters_drained/
  - cn_rasters_undrained/
- File format: cn_{hc}_{arc}_{block_id}.tif

Usage
-----

Serial script:
  python generate_curve_number.py --start_block_id 1
  python generate_curve_number.py --block_ids 100 101 102

Parallel script:
  python generate_cn_parallel.py --start_block_id 1
  python generate_cn_parallel.py --block_ids_file ids.txt
  python generate_cn_parallel.py --processes 8

Notes
-----

- Uses 255 as no-data value.
- Handles dual HSGs with drained and undrained conditions.
- Skips blocks if all expected outputs exist or if no valid HSG is present.
- Compressed Cloud-Optimized GeoTIFFs are generated by the parallel script.
