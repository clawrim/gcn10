## Intra Block OpenMP

Parallelization to compute row wise runoff for one block by dynamic scheduling among pthreads.

Within a block; Open MP parallelization is working. 
1 thread - 1m40s, 1m43s (computing took most of the time)
2 threads - failed, 0m21s
3 threads - 0m20s
4 threads - 0m18s
8 threads - 0m18s (Computing was fast, reading and especially writing seemed slow)
12 threads - 0m16s (most of the cores were idle while i/o)

## Inter Block MPI

Parallelization to compute multiple blocks at a time. 

Error free compilation but MPI is broken. 

./mpirun 
****************************************************************************
* hwloc 2.0.2rc1-git has encountered what looks like an error from the operating system.
*
* L1d (cpuset 0x00000103) intersects with L2 (cpuset 0x00000f00) without inclusion!
* Error occurred in topology.c line 1384
*
* The following FAQ entry in the hwloc documentation may help:
*   What should I do when hwloc reports "operating system" warnings?
* Otherwise please report this error message to the hwloc user's mailing list,
* along with the files generated by the hwloc-gather-topology script.
****************************************************************************
[abd:19777] *** Process received signal ***
[abd:19777] Signal: Segmentation fault (11)
[abd:19777] Signal code: Address not mapped (1)
[abd:19777] Failing at address: (nil)
[abd:19777] [ 0] /lib64/libc.so.6(+0x430d0) [0x7ff12f0430d0]
[abd:19777] [ 1] /usr/lib64/libopen-pal.so.40(opal_hwloc201_hwloc_bitmap_copy+0x10) [0x7ff12f5d7fd0]
[abd:19777] [ 2] /usr/lib64/libopen-pal.so.40(+0x9d3b2) [0x7ff12f5fc3b2]
[abd:19777] [ 3] /usr/lib64/libopen-pal.so.40(+0x9d4b1) [0x7ff12f5fc4b1]
[abd:19777] [ 4] /usr/lib64/libopen-pal.so.40(+0x9d4b1) [0x7ff12f5fc4b1]
[abd:19777] [ 5] /usr/lib64/libopen-pal.so.40(+0x9d4b1) [0x7ff12f5fc4b1]
[abd:19777] [ 6] /usr/lib64/libopen-pal.so.40(opal_hwloc201_hwloc_topology_load+0x1dc) [0x7ff12f6019dc]
[abd:19777] [ 7] /usr/lib64/libopen-pal.so.40(opal_hwloc_base_get_topology+0xfe8) [0x7ff12f5d5b18]
[abd:19777] [ 8] /usr/lib64/openmpi/mca_ess_hnp.so(+0x5936) [0x7ff12f3d4936]
[abd:19777] [ 9] /usr/lib64/libopen-rte.so.40(orte_init+0x2ae) [0x7ff12f6da6ce]
[abd:19777] [10] /usr/lib64/libopen-rte.so.40(orte_submit_init+0x870) [0x7ff12f68d110]
[abd:19777] [11] mpirun() [0x4012c0]
[abd:19777] [12] /lib64/libc.so.6(+0x29d57) [0x7ff12f029d57]
[abd:19777] [13] /lib64/libc.so.6(__libc_start_main+0x85) [0x7ff12f029e15]
[abd:19777] [14] mpirun() [0x401121]
[abd:19777] *** End of error message ***
Segmentation fault


Probably recompilation of MPI with hwloc is required.

sbopkg -i hwloc

recompiled openmpi and it solved. 


